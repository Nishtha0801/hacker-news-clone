{"ast":null,"code":"var _jsxFileName = \"/Users/nishthagoyal/Desktop/hack-new/hacker-news-clone/src/App.js\";\nimport React, { Component } from \"react\";\nimport Feed from \"./containers/Feed\";\nimport MenuBar from \"./components/MenuBar\";\nimport Footer from \"./components/Footer\";\nimport axios from \"axios\";\nimport styled from \"styled-components\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport SortingBox from \"./components/Story/SortingBox\";\nimport SearchPage from \"./components/SearchBar/SearchPage\";\nexport const ButtonWrapper = styled.div`\n  padding: 0px 30px 10px;\n`;\nexport function getSinglePage(page_number, m) {\n  const urlKey = \"newstories\";\n  return new Promise(resolve => {\n    axios.get(`https://hn.algolia.com/api/v1/search?page=${page_number}`).then(res => {\n      let all_data = res.data;\n      let final_data = [];\n      let i = m + 1;\n\n      for (let row of all_data.hits) {\n        final_data.push({\n          id: i,\n          created_at: row.created_at,\n          title: row.title,\n          url: row.url,\n          author: row.author,\n          points: row.points,\n          story_text: row.story_text,\n          num_comments: row.num_comments,\n          objectID: row.objectID\n        });\n        i++;\n      }\n\n      resolve(final_data);\n    });\n  });\n}\n\nconst App = () => {\n  const [curStories, setCurStories] = useState([]);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [totalStories, setTotalStories] = useState(0);\n  const [m, setM] = useState(0);\n  const [isSearch, setIsSearch] = useState(false);\n\n  const getStories = async page_number => {\n    let results = await getSinglePage(page_number, m);\n    console.log(results, \" Here is Results\");\n    setCurStories(results);\n    setM(m + results.length);\n  };\n\n  const handleClick = () => {\n    setPageNumber(1 + pageNumber);\n    getStories(pageNumber + 1);\n  };\n\n  const hideData = id => {\n    let data_here = curStories;\n\n    for (let k = 0; k < data_here.length; k++) {\n      if (data_here[k].id === id) {\n        data_here.splice(k, 1);\n        break;\n      }\n    }\n\n    setCurStories(data_here);\n  };\n\n  const upVote = id => {\n    let data_here = curStories;\n    let m = -1;\n\n    for (let k = 0; k < data_here.length; k++) {\n      if (data_here[k].id === id) {\n        m = k;\n        break;\n      }\n    }\n\n    data_here[m].points += 1;\n    setCurStories(data_here);\n  };\n\n  useEffect(() => {\n    getStories(pageNumber);\n  }, [pageNumber]);\n  useEffect(() => {}, [totalStories]); // Show only 1)  Last 24 hrs 2) Past Week 3) Past Month 4) Past Year 5) All Time\n\n  const showLast24Hrs = () => {\n    let data_here = curStories;\n    let final_data = [];\n    let i = 0;\n\n    for (let row of data_here) {\n      let date = new Date(row.created_at);\n      let cur_date = new Date();\n      let diff = cur_date.getTime() - date.getTime();\n      let diffDays = Math.ceil(diff / (1000 * 3600 * 24));\n\n      if (diffDays <= 1) {\n        final_data.push(row);\n        i++;\n      }\n    }\n\n    setCurStories(final_data);\n  };\n\n  const showPastWeek = () => {\n    let data_here = curStories;\n    let final_data = [];\n    let i = 0;\n\n    for (let row of data_here) {\n      let date = new Date(row.created_at);\n      let cur_date = new Date();\n      let diff = cur_date.getTime() - date.getTime();\n      let diffDays = Math.ceil(diff / (1000 * 3600 * 24));\n\n      if (diffDays <= 7) {\n        final_data.push(row);\n        i++;\n      }\n    }\n\n    setCurStories(final_data);\n  };\n\n  const showPastYear = () => {\n    let data_here = curStories;\n    let final_data = [];\n    let i = 0;\n\n    for (let row of data_here) {\n      let date = new Date(row.created_at);\n      let cur_date = new Date();\n      let diff = cur_date.getTime() - date.getTime();\n      let diffDays = Math.ceil(diff / (1000 * 3600 * 24));\n\n      if (diffDays <= 365) {\n        final_data.push(row);\n        i++;\n      }\n    }\n\n    setCurStories(final_data);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"link\", {\n    rel: \"stylesheet\",\n    href: \"https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css\",\n    integrity: \"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\",\n    crossorigin: \"anonymous\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"script\", {\n    src: \"https://code.jquery.com/jquery-3.2.1.slim.min.js\",\n    integrity: \"sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN\",\n    crossorigin: \"anonymous\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"script\", {\n    src: \"https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js\",\n    integrity: \"sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q\",\n    crossorigin: \"anonymous\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"script\", {\n    src: \"https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js\",\n    integrity: \"sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl\",\n    crossorigin: \"anonymous\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }), isSearch ? /*#__PURE__*/React.createElement(SearchPage, {\n    setCurStories: setCurStories,\n    setIsSearch: setIsSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MenuBar, {\n    setIsSearch: setIsSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Feed, {\n    items: curStories,\n    hideData: hideData,\n    upVote: upVote,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"nav\", {\n    \"aria-label\": \"Page navigation example\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"pagination\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"page-item\",\n    onClick: () => {\n      setPageNumber(pageNumber + 1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"page-link \",\n    style: {\n      color: \"black\"\n    },\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 19\n    }\n  }, \"More\")))))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/nishthagoyal/Desktop/hack-new/hacker-news-clone/src/App.js"],"names":["React","Component","Feed","MenuBar","Footer","axios","styled","useState","useEffect","SortingBox","SearchPage","ButtonWrapper","div","getSinglePage","page_number","m","urlKey","Promise","resolve","get","then","res","all_data","data","final_data","i","row","hits","push","id","created_at","title","url","author","points","story_text","num_comments","objectID","App","curStories","setCurStories","pageNumber","setPageNumber","totalStories","setTotalStories","setM","isSearch","setIsSearch","getStories","results","console","log","length","handleClick","hideData","data_here","k","splice","upVote","showLast24Hrs","date","Date","cur_date","diff","getTime","diffDays","Math","ceil","showPastWeek","showPastYear","display","justifyContent","alignItems","width","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Feed from \"./containers/Feed\";\nimport MenuBar from \"./components/MenuBar\";\nimport Footer from \"./components/Footer\";\nimport axios from \"axios\";\nimport styled from \"styled-components\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport SortingBox from \"./components/Story/SortingBox\";\nimport SearchPage from \"./components/SearchBar/SearchPage\";\n\nexport const ButtonWrapper = styled.div`\n  padding: 0px 30px 10px;\n`;\n\nexport function getSinglePage(page_number, m) {\n  const urlKey = \"newstories\";\n  return new Promise((resolve) => {\n    axios\n      .get(`https://hn.algolia.com/api/v1/search?page=${page_number}`)\n      .then((res) => {\n        let all_data = res.data;\n        let final_data = [];\n        let i = m + 1;\n        for (let row of all_data.hits) {\n          final_data.push({\n            id: i,\n            created_at: row.created_at,\n            title: row.title,\n            url: row.url,\n            author: row.author,\n            points: row.points,\n            story_text: row.story_text,\n            num_comments: row.num_comments,\n            objectID: row.objectID,\n          });\n          i++;\n        }\n        resolve(final_data);\n      });\n  });\n}\n\nconst App = () => {\n  const [curStories, setCurStories] = useState([]);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [totalStories, setTotalStories] = useState(0);\n  const [m, setM] = useState(0);\n  const [isSearch, setIsSearch] = useState(false);\n\n  const getStories = async (page_number) => {\n    let results = await getSinglePage(page_number, m);\n    console.log(results, \" Here is Results\");\n    setCurStories(results);\n    setM(m + results.length);\n  };\n\n  const handleClick = () => {\n    setPageNumber(1 + pageNumber);\n    getStories(pageNumber + 1);\n  };\n\n  const hideData = (id) => {\n    let data_here = curStories;\n    for (let k = 0; k < data_here.length; k++) {\n      if (data_here[k].id === id) {\n        data_here.splice(k, 1);\n        break;\n      }\n    }\n    setCurStories(data_here);\n  };\n\n  const upVote = (id) => {\n    let data_here = curStories;\n    let m = -1;\n    for (let k = 0; k < data_here.length; k++) {\n      if (data_here[k].id === id) {\n        m = k;\n        break;\n      }\n    }\n    data_here[m].points += 1;\n    setCurStories(data_here);\n  };\n\n  useEffect(() => {\n    getStories(pageNumber);\n  }, [pageNumber]);\n\n  useEffect(() => {}, [totalStories]);\n\n  // Show only 1)  Last 24 hrs 2) Past Week 3) Past Month 4) Past Year 5) All Time\n\n  const showLast24Hrs = () => {\n    let data_here = curStories;\n    let final_data = [];\n    let i = 0;\n    for (let row of data_here) {\n      let date = new Date(row.created_at);\n      let cur_date = new Date();\n      let diff = cur_date.getTime() - date.getTime();\n      let diffDays = Math.ceil(diff / (1000 * 3600 * 24));\n      if (diffDays <= 1) {\n        final_data.push(row);\n        i++;\n      }\n    }\n    setCurStories(final_data);\n  };\n\n  const showPastWeek = () => {\n    let data_here = curStories;\n    let final_data = [];\n    let i = 0;\n    for (let row of data_here) {\n      let date = new Date(row.created_at);\n      let cur_date = new Date();\n      let diff = cur_date.getTime() - date.getTime();\n      let diffDays = Math.ceil(diff / (1000 * 3600 * 24));\n      if (diffDays <= 7) {\n        final_data.push(row);\n        i++;\n      }\n    }\n    setCurStories(final_data);\n  };\n\n  const showPastYear = () => {\n    let data_here = curStories;\n    let final_data = [];\n    let i = 0;\n    for (let row of data_here) {\n      let date = new Date(row.created_at);\n      let cur_date = new Date();\n      let diff = cur_date.getTime() - date.getTime();\n      let diffDays = Math.ceil(diff / (1000 * 3600 * 24));\n      if (diffDays <= 365) {\n        final_data.push(row);\n        i++;\n      }\n    }\n    setCurStories(final_data);\n  };\n\n  return (\n    <div>\n      <link\n        rel=\"stylesheet\"\n        href=\"https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css\"\n        integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\"\n        crossorigin=\"anonymous\"\n      />\n\n      <script\n        src=\"https://code.jquery.com/jquery-3.2.1.slim.min.js\"\n        integrity=\"sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN\"\n        crossorigin=\"anonymous\"\n      ></script>\n      <script\n        src=\"https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js\"\n        integrity=\"sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q\"\n        crossorigin=\"anonymous\"\n      ></script>\n      <script\n        src=\"https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js\"\n        integrity=\"sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl\"\n        crossorigin=\"anonymous\"\n      ></script>\n\n      {isSearch ? (\n        <SearchPage setCurStories={setCurStories} setIsSearch={setIsSearch} />\n      ) : (\n        <>\n          <MenuBar setIsSearch={setIsSearch} />\n          {/* <SortingBox/> */}\n          <Feed items={curStories} hideData={hideData} upVote={upVote} />\n\n          {/* Pagination */}\n          <div\n            style={{\n              display: \"flex\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              width: \"100%\",\n            }}\n          >\n            <nav aria-label=\"Page navigation example\">\n              <ul className=\"pagination\">\n                <li\n                  className=\"page-item\"\n                  onClick={() => {\n                    setPageNumber(pageNumber + 1);\n                  }}\n                >\n                  <a\n                    className=\"page-link \"\n                    style={{\n                      color: \"black\",\n                    }}\n                    href=\"#\"\n                  >\n                    More\n                  </a>\n                </li>\n              </ul>\n            </nav>\n          </div>\n        </>\n      )}\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}